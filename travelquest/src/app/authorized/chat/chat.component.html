<div *ngIf="currentUser">
  <!-- Conversation List -->
  <div *ngFor="let conversation of conversations$ | async">
    <button (click)="selectConversation(conversation.id)">
      Conversation with {{ conversation.participants.join(", ") }}
    </button>
  </div>

  <!-- Create a new conversation button -->
  <button
    *ngIf="selectedOtherUserId"
    (click)="createConversation(selectedOtherUserId)"
  >
    Create New Conversation
  </button>

  <!-- Chat Messages -->
  <div *ngIf="currentConversationId">
    <h3>Messages</h3>
    <div *ngFor="let message of messages$ | async">
      <p>{{ message.user }}: {{ message.text }}</p>
    </div>

    <!-- Message Input -->
    <textarea
      [(ngModel)]="newMessage"
      placeholder="Type a message..."
    ></textarea>
    <button (click)="sendMessage()">Send</button>
  </div>
</div>
